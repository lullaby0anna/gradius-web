
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Gradius Laser G2 Extended</title>
<style>
body { margin:0; background:black; overflow:hidden; }
canvas { display:block; margin:auto; background:black; }
</style>
</head>
<body>
<canvas id="game" width="960" height="540"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let laserLevel = 0;      // 0=none,1=forward,2=forward+up
let downEnabled = false; // 3 key
let laserWidthLevel = 0; // 4 key thickness level

let firing = false;

document.addEventListener("keydown", e=>{
    if(e.code==="Space") firing = true;
    if(e.key==="l") laserLevel = Math.min(2, laserLevel+1); // simulate powerup
    if(e.key==="3") downEnabled = true;
    if(e.key==="4") laserWidthLevel = Math.min(3, laserWidthLevel+1);
});
document.addEventListener("keyup", e=>{
    if(e.code==="Space") firing = false;
});

function drawLaser(x1,y1,x2,y2){
    const base = 6 + laserWidthLevel*3;
    ctx.lineCap="round";
    ctx.lineWidth = base;
    ctx.strokeStyle="rgba(120,200,255,0.9)";
    ctx.stroke();

    ctx.lineWidth = base/2;
    ctx.strokeStyle="rgba(255,255,255,0.95)";
    ctx.stroke();
}

function render(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    const px = 150;
    const py = canvas.height/2;

    if(firing && laserLevel>0){
        // Forward laser
        ctx.beginPath();
        ctx.moveTo(px,py);
        ctx.lineTo(canvas.width,py);
        drawLaser();

        if(laserLevel>=2){
            // Up 45 deg
            ctx.beginPath();
            ctx.moveTo(px,py);
            ctx.lineTo(canvas.width, py-400);
            drawLaser();

            if(downEnabled){
                ctx.beginPath();
                ctx.moveTo(px,py);
                ctx.lineTo(canvas.width, py+400);
                drawLaser();
            }
        }
    }

    requestAnimationFrame(render);
}

render();
</script>
</body>
</html>
